/**
 * Theme Lazyload v1.0
 * Lightweight lazy loading for background images and videos
 * @see theme-lazyload.js for full documentation
 */
(()=>{const e='[loading="lazy"][data-bg], [loading="lazy"][data-src], video[loading="lazy"], [data-lazy]',t="300px",a=window.devicePixelRatio>1,n=e=>{delete e.dataset.bg,delete e.dataset.bg2x,delete e.dataset.lazy,e.removeAttribute("loading")},o=e=>{const t=a&&e.dataset.bg2x?e.dataset.bg2x:e.dataset.bg;if(!t)return;e.classList.add("is-loading");const o=new Image;o.onload=()=>{e.style.backgroundImage=`url("${t}")`,e.classList.remove("is-loading"),e.classList.add("is-loaded"),n(e)},o.onerror=()=>{e.classList.remove("is-loading"),e.classList.add("is-error"),n(e)},o.src=t},s=e=>{if("VIDEO"!==e.tagName)return;e.classList.add("is-loading");const t=e.dataset.src;t&&(e.src=t,delete e.dataset.src);const a=e.querySelectorAll("source[data-src]");a.forEach(e=>{e.src=e.dataset.src,delete e.dataset.src}),(t||a.length)&&e.load();const o=()=>{e.classList.remove("is-loading"),e.classList.add("is-loaded"),n(e),e.removeEventListener("loadeddata",o),e.removeEventListener("error",i)},i=()=>{e.classList.remove("is-loading"),e.classList.add("is-error"),n(e),e.removeEventListener("loadeddata",o),e.removeEventListener("error",i)};e.addEventListener("loadeddata",o,{once:!0}),e.addEventListener("error",i,{once:!0}),e.readyState>=3&&o()},d=e=>{e.classList.contains("is-loaded")||e.classList.contains("is-loading")||("VIDEO"===e.tagName?s(e):e.dataset.bg&&o(e))},i=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(d(e.target),i.unobserve(e.target))})},{rootMargin:t,threshold:0}),l=t=>{(t.querySelectorAll?t.querySelectorAll(e):[]).forEach(e=>{e.classList.contains("is-loaded")||e.classList.contains("is-loading")||i.observe(e)})},r=()=>{l(document),new MutationObserver(e=>{for(const t of e)if(t.addedNodes.length){l(t.target);break}}).observe(document.documentElement,{childList:!0,subtree:!0});const e=e=>l(e.target);document.addEventListener("shopify:section:load",e,{passive:!0}),document.addEventListener("shopify:section:reorder",e,{passive:!0}),document.addEventListener("shopify:block:select",e,{passive:!0})};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",r):r();const c={scan:l,load:d,observer:i};window.lazyload=c,window.themeLazy=c})();
