!function(){"use strict";const e="[data-drawer]",t="[data-drawer-trigger]",n="[data-drawer-close]",o="[data-drawer-overlay]",r="is-open",d="has-drawer-open",s="is-position-left",i="is-position-right";let a=null,c=null,u=null;function l(e){const t=document.querySelector(`[data-drawer="${e}"]`);if(!t)return console.warn(`[theme-drawer] Drawer "${e}" not found`),!1;window.themeModal&&"function"==typeof window.themeModal.closeAll&&window.themeModal.closeAll(),a&&a!==t&&f(a),c=document.activeElement;const n=t.dataset.drawerPosition||"left";return t.classList.remove(s,i),t.classList.add("right"===n?i:s),t.hidden=!1,t.offsetHeight,t.classList.add(r),document.body.classList.add(d),a=t,requestAnimationFrame((()=>{const e=h(t);e.length&&e[0].focus()})),document.dispatchEvent(new CustomEvent("drawer:open",{detail:{id:e,drawer:t,position:n}})),!0}function f(e){if(!e||e.hidden)return!1;const t=e.dataset.drawer;e.classList.remove(r),document.body.classList.remove(d);const n=()=>{e.hidden=!0,e.removeEventListener("transitionend",n)};return e.addEventListener("transitionend",n),setTimeout((()=>{e.hidden||(e.hidden=!0)}),350),a===e&&(a=null),c&&"function"==typeof c.focus&&(c.focus(),c=null),document.dispatchEvent(new CustomEvent("drawer:close",{detail:{id:t,drawer:e}})),!0}function m(){document.querySelectorAll(e).forEach((e=>{e.hidden||f(e)}))}function h(e){const t=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');return Array.from(t).filter((e=>!e.disabled&&null!==e.offsetParent))}function w(e){a&&(u=e.touches[0].clientX)}function v(e){if(!a||null===u)return;const t=e.changedTouches[0].clientX-u,n=a.dataset.drawerPosition||"left";("left"===n&&t<-80||"right"===n&&t>80)&&f(a),u=null}function p(){document.addEventListener("click",(r=>{const d=r.target.closest(t);if(d){r.preventDefault();return void l(d.dataset.drawerTrigger)}const s=r.target.closest(n);if(s){r.preventDefault();const t=s.closest(e);return void(t&&f(t))}const i=r.target.closest(o);if(i){const t=i.closest(e);t&&f(t)}})),document.addEventListener("keydown",(e=>{if("Escape"===e.key&&a)return e.preventDefault(),void f(a);a&&function(e,t){if("Tab"!==e.key)return;const n=h(t);if(!n.length)return;const o=n[0],r=n[n.length-1];e.shiftKey&&document.activeElement===o?(e.preventDefault(),r.focus()):e.shiftKey||document.activeElement!==r||(e.preventDefault(),o.focus())}(e,a)})),document.addEventListener("touchstart",w,{passive:!0}),document.addEventListener("touchend",v,{passive:!0}),document.addEventListener("shopify:section:unload",(()=>{m()}))}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",p):p(),window.themeDrawer={open:l,close:function(e){const t="string"==typeof e?document.querySelector(`[data-drawer="${e}"]`):e;return!!t&&f(t)},closeAll:m,isOpen:function(e){const t=document.querySelector(`[data-drawer="${e}"]`);return t&&!t.hidden}}}();