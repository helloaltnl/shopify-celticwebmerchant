{%- liquid
	assign has_heading = false
	if section.settings.heading != blank
		assign has_heading = true
	endif
-%}

<div class="block-marketing-banners__content {{ section.settings.width }}{% if section.settings.custom_class != blank %} {{ section.settings.custom_class }}{% endif %}"{% if section.settings.anchor != blank %} id="{{ section.settings.anchor }}"{% endif %}>
	{%- if has_heading -%}
		{%- render 'html-marketing-headline',
			heading: section.settings.heading,
			subheading: section.settings.subheading,
			alignment: 'center'
		-%}
	{%- endif -%}
	
	<div class="block-marketing-banners__grid block-marketing-banners__grid--{{ section.settings.layout }}{% if has_heading %} block-marketing-banners__grid--has-heading{% endif %}">
		{%- for block in section.blocks -%}
			<div class="block-marketing-banners__item" {{ block.shopify_attributes }}>
				{%- render 'html-marketing-banner',
					text: block.settings.text,
					cta_text: block.settings.cta_text,
					cta_url: block.settings.cta_url,
					style: block.settings.style,
					dismissible: block.settings.dismissible
				-%}
			</div>
		{%- endfor -%}
	</div>
</div>

{% style %}
	#shopify-section-{{ section.id }}.block-marketing-banners {
		background-color: {{ section.settings.background_color }};
		color: {{ section.settings.text_color }};
		padding-block: {{ section.settings.padding_block }}em;
	}

	.block-marketing-banners__grid {
		display: grid;
		gap: 1em;
	}

	.block-marketing-banners__grid--has-heading {
		margin-block-start: 2em;
	}

	.block-marketing-banners__grid--stacked {
		grid-template-columns: 1fr;
	}

	.block-marketing-banners__grid--two-column {
		grid-template-columns: repeat(2, 1fr);
	}

	.block-marketing-banners__grid--three-column {
		grid-template-columns: repeat(3, 1fr);
	}

	@media (max-width: 60em) {
		.block-marketing-banners__grid--three-column {
			grid-template-columns: repeat(2, 1fr);
		}
	}

	@media (max-width: 40em) {
		.block-marketing-banners__grid--two-column,
		.block-marketing-banners__grid--three-column {
			grid-template-columns: 1fr;
		}
	}
{% endstyle %}

{% schema %}
{
	"name": "Marketing banners",
	"tag": "section",
	"class": "block-marketing-banners",
	"disabled_on": {
		"groups": ["header", "footer"]
	},
	"settings": [
		{
			"type": "header",
			"content": "Content"
		},
		{
			"type": "text",
			"id": "heading",
			"label": "Heading"
		},
		{
			"type": "text",
			"id": "subheading",
			"label": "Subheading"
		},
		{
			"type": "header",
			"content": "Layout"
		},
		{
			"type": "select",
			"id": "width",
			"label": "Width",
			"options": [
				{ "value": "is-align-narrow", "label": "Narrow" },
				{ "value": "is-align-small", "label": "Small" },
				{ "value": "is-align", "label": "Regular" },
				{ "value": "is-align-wide", "label": "Wide" },
				{ "value": "is-align-full", "label": "Full" }
			],
			"default": "is-align-wide"
		},
		{
			"type": "select",
			"id": "layout",
			"label": "Grid layout",
			"options": [
				{ "value": "stacked", "label": "Stacked" },
				{ "value": "two-column", "label": "Two columns" },
				{ "value": "three-column", "label": "Three columns" }
			],
			"default": "stacked"
		},
		{
			"type": "range",
			"id": "padding_block",
			"label": "Vertical padding",
			"min": 0,
			"max": 6,
			"step": 0.5,
			"default": 3,
			"unit": "em"
		},
		{
			"type": "header",
			"content": "Colors"
		},
		{
			"type": "color",
			"id": "background_color",
			"label": "Background"
		},
		{
			"type": "color",
			"id": "text_color",
			"label": "Text"
		},
		{
			"type": "header",
			"content": "Advanced"
		},
		{
			"type": "text",
			"id": "anchor",
			"label": "Anchor",
			"info": "ID for scroll links (without #)"
		},
		{
			"type": "text",
			"id": "custom_class",
			"label": "Custom class",
			"info": "Add custom CSS class for styling"
		}
	],
	"blocks": [
		{
			"type": "banner",
			"name": "Banner",
			"settings": [
				{
					"type": "textarea",
					"id": "text",
					"label": "Text"
				},
				{
					"type": "text",
					"id": "cta_text",
					"label": "Button text",
					"info": "Leave empty to use locale default"
				},
				{
					"type": "url",
					"id": "cta_url",
					"label": "Button link"
				},
				{
					"type": "select",
					"id": "style",
					"label": "Style",
					"options": [
						{ "value": "info", "label": "Info" },
						{ "value": "success", "label": "Success" },
						{ "value": "warning", "label": "Warning" },
						{ "value": "error", "label": "Error" },
						{ "value": "promo", "label": "Promo" }
					],
					"default": "promo"
				},
				{
					"type": "checkbox",
					"id": "dismissible",
					"label": "Dismissible",
					"default": false
				}
			]
		}
	],
	"max_blocks": 6,
	"presets": [
		{
			"name": "Banners",
			"category": "Marketing",
			"blocks": [
				{ "type": "banner" }
			]
		}
	]
}
{% endschema %}
