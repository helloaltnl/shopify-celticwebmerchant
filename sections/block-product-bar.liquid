{% if request.page_type == 'product' %}
<section class="block-product-bar-content alignwide">
	<section class="bar-information">
		<figure class="product-card__media">
			<picture>
			{%- if product.featured_media -%}
			  {%- assign img = product.featured_media -%}
			  {%- assign img_alt = product.featured_media.alt | default: product.title | escape -%}
			  <img class="lazy" data-src="{{ img | image_url: width: 128 }}" alt="{{ img_alt }}">
			{%- else -%}
			  <div class="product-card__placeholder" aria-hidden="true"></div>
			{%- endif -%}
			</picture>
		</figure>
		<section>
			<h5>{{product.title}}</h5>
			{% render 'html-product-price', product: product, show: true, from:'auto' %}
		</section>
	</section>
	<section class="bar-action">
		<a href="#pageMain" class="is-button is-cart-button">
			<i><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 29.04 25" style="enable-background:new 0 0 29.04 25;" xml:space="preserve" fill="currentColor"><path d="M11.04,23c0,1.1-0.9,2-2,2s-2-0.9-2-2s0.9-2,2-2S11.04,21.9,11.04,23z M20.04,21c-1.1,0-2,0.9-2,2s0.9,2,2,2s2-0.9,2-2
				  S21.14,21,20.04,21z M29.04,7c0,3.57-2.67,6.5-6.11,6.94l-0.5,2.64c-0.29,1.43-1.56,2.42-3,2.42h-9.7c-0.02,0-0.04,0-0.06,0
				  c-1.41,0-2.64-1.01-2.92-2.42L5.06,8.24C5.06,8.21,5.05,8.18,5.05,8.15L4.22,4H1.04c-0.55,0-1-0.45-1-1s0.45-1,1-1h4
				  c0.48,0,0.89,0.34,0.98,0.8L6.86,7h8.18c0-3.87,3.13-7,7-7C25.9,0,29.04,3.13,29.04,7z M20.89,13.9c-2.66-0.44-4.81-2.36-5.56-4.9
				  H7.26l1.44,7.19c0.09,0.48,0.48,0.79,1,0.81h9.74c0.5-0.01,0.92-0.33,1.02-0.8L20.89,13.9z M25.54,6.5h-3v-3h-1v3h-3v1h3v3h1v-3h3
				  V6.5z"></path></svg></i>
			<span>Aan winkelwagen toevoegen</span>
		</a>
	</section>
</section>
{% endif %}

{%- style -%}
	.block-product-bar {
		position: absolute; top:100%; left:0; right:0;
		background-color: #fff; border-top:var(--theme-color-grey) 1px solid;
		opacity:0; transition:opacity 125ms linear; pointer-events: none;
	}
	.block-product-bar-content {
		padding-top:1em; padding-bottom: 1em;
		display: flex; flex-direction: row; flex-wrap: nowrap;
		align-items: center; justify-content: space-between; column-gap: 2em;
		& > .bar-information {
			display: flex; flex-direction: row; flex-wrap: nowrap;
			align-items: center; justify-content: flex-start;
			column-gap: 1em;
			& figure {
				display: block;
				padding:0; margin:0;
				width: 3em; height:3em;
				flex-shrink: 0;
				& picture {
					display: block; width:100%; height:100%;
					& img { width: 100%; height: 100%; object-fit: cover;}
				}
			}
			& section {
				& h5 { margin: 0; flex-grow: 1;}
			}
			
		}
		& > .bar-action {
			& > .is-button {
				background-color: var(--theme-color-green); color:var(--theme-color-white);
				padding:0.5em 1em;
				& > i {
					width:1.2em; height:1.2em;
					& > svg { width:1.2em; height:1.2em; }
				}
			}
		}
	}
	body.show-product-bar {
		& .block-product-bar {
			opacity: 1; pointer-events: all;
		}
	}
	@media (max-width: 960px) {
		.block-product-bar {
			& .block-product-bar-content {
				& > .bar-action {
					& > .is-button {
						padding:1em;
						& span { display: none;}
					}
				}
			}
		}
	}
{%- endstyle -%}

{% schema %}
{
  "name": "Product bar",
  "tag": "section",
  "class": "block-product-bar",
  "disabled_on": {
	"groups": ["footer"]
  },
  "settings": [],
  "blocks": [
	  {
		"type": "@app"
	  }
  ],
  "max_blocks": 5,
  "presets": [
	{
	  "name": "Product bar for quick access",
	  "category": "Theme Product",
	  "blocks": []
	}
  ]
}
{% endschema %}
