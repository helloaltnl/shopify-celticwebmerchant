{%- comment -%}
  ============================================================================
  BLOCK-PRODUCT-FORM
  ============================================================================
  Main product form section with media gallery and configurable form blocks.
  
  FEATURES:
  - 2-column layout (media + form)
  - Modular block-based form structure
  - AJAX variant updates via Section Rendering API
  - Fragment reconciliation with app integration support
  
  DEPENDENCIES:
  - html-product-gallery snippet
  - html-product-* snippets for each block type
  ============================================================================
{%- endcomment -%}

{%- assign p = product -%}
{%- if p == blank and section.settings.product != blank -%}
  {%- assign p = section.settings.product -%}
{%- endif -%}

{%- if p != blank -%}
<div class="block-product-form__content {{ section.settings.width }}">
  <div class="block-product-form__media">
    {%- render 'html-product-gallery', product: p -%}
  </div>
  
  <div class="block-product-form__form">
    <div class="block-product-form__wrapper"
      data-product-form
      data-section-id="{{ section.id }}"
      data-product-json="{{ p | json | escape }}">
      
      <form action="/cart/add" method="post" id="product-form-{{ section.id }}" class="block-product-form__fields" novalidate>
        {%- assign first_variant_id = p.selected_or_first_available_variant.id -%}
        <input type="hidden" name="id" value="{{ first_variant_id }}" data-variant-id>
        
        <div class="block-product-form__blocks">
          
          {%- for block in section.blocks -%}
            <div class="block-product-form__block"
              {{ block.shopify_attributes }}>
              
              {%- case block.type -%}
                {%- when 'rating' -%}
                  {%- render 'html-product-rating', product: p, scroll_target: block.settings.scroll_target, show_count: block.settings.show_count, size: block.settings.size -%}
                  
                {%- when 'heading' -%}
                  {%- render 'html-product-heading', product: p, show_vendor: block.settings.show_vendor -%}
                  
                {%- when 'price' -%}
                  <div data-fragment-update="price">
                    {%- render 'html-product-price', product: p -%}
                  </div>
                  
                {%- when 'description' -%}
                  {%- render 'html-product-description', product: p, truncate: block.settings.truncate, words: block.settings.words, read_more_target: block.settings.read_more_target -%}
                  
                {%- when 'variant_picker' -%}
                  {%- render 'html-product-variant_picker', product: p, threshold_dropdown: block.settings.threshold_dropdown -%}
                  
                {%- when 'notify' -%}
                  {%- render 'html-product-notify', product: p -%}
                  
                {%- when 'stock' -%}
                  <div data-fragment-update="stock">
                    {%- render 'html-product-stock', product: p, show_stock_count: block.settings.show_stock_count -%}
                  </div>
                  
                {%- when 'delivery' -%}
                  <div data-fragment-update="delivery">
                    {%- render 'html-product-delivery', product: p, show: true -%}
                  </div>
                  
                {%- when 'sku' -%}
                  <div data-fragment-update="sku">
                    {%- render 'html-product-sku', product: p, show_label: block.settings.show_label -%}
                  </div>
                  
                {%- when 'upsell' -%}
                  {%- render 'html-product-upsell', product: p -%}
                  
                {%- when 'selling_plans' -%}
                  {%- render 'html-product-selling_plans', product: p -%}
                  
                {%- when 'atc' -%}
                  <div data-fragment-update="atc">
                    {%- render 'html-product-atc', product: p, full_width: block.settings.full_width, show_quantity: block.settings.show_quantity, show_wishlist: block.settings.show_wishlist -%}
                  </div>
                  
                {%- when 'trust_payments' -%}
                  {%- render 'html-product-payments', method_1: block.settings.method_1, method_2: block.settings.method_2, method_3: block.settings.method_3, method_4: block.settings.method_4, method_5: block.settings.method_5, method_6: block.settings.method_6, method_7: block.settings.method_7, method_8: block.settings.method_8, method_9: block.settings.method_9, method_10: block.settings.method_10 -%}
                  
                {%- when 'dynamic_checkout' -%}
                  {%- render 'html-product-dynamic_checkout', product: p -%}
                  
                {%- when 'trust_usps' -%}
                  {%- render 'html-product-trust', product: p, item_1_text: block.settings.item_1_text, item_1_url: block.settings.item_1_url, item_2_text: block.settings.item_2_text, item_2_url: block.settings.item_2_url, item_3_text: block.settings.item_3_text, item_3_url: block.settings.item_3_url, item_4_text: block.settings.item_4_text, item_4_url: block.settings.item_4_url -%}
                  
                {%- when 'trust_identity' -%}
                  {%- render 'html-product-identity', product: p, tag: block.settings.tag, message: block.settings.message, icon: block.settings.icon -%}
                  
                {%- when '@app' -%}
                  {%- render block -%}
              {%- endcase -%}
            </div>
          {%- endfor -%}
        </div>
      </form>
    </div>
  </div>
</div>


{%- else -%}
<div class="block-product-form__empty">
  <p>{{ 'products.product.product_unavailable' | t | default: 'Select a product in section settings.' }}</p>
</div>
{%- endif -%}

<style>
  .block-product-form {
    background-color: {{ section.settings.background_color | default: '#ffffff' }};
    color: {{ section.settings.text_color | default: '#111111' }};
  }

  .block-product-form__content {
    display: flex;
    flex-direction: row;
    flex-wrap: nowrap;
    align-items: stretch;
    justify-content: center;
	column-gap: 2em;
  }

  .block-product-form__media {
    position: relative;
    z-index: 1;
    flex-grow: 1;
    flex-basis: 20em;
    max-width: 58vw;
  }

  .block-product-form__form {
    position: relative;
    z-index: 0;
    flex-grow: 1;
    flex-basis: 10em;
    background-color: var(--theme-color-white);
  }

  .block-product-form__wrapper {
    display: flex;
    flex-direction: column;
    gap: {{ section.settings.block_gap }}em;
    padding: 2em 1em;
  }

  .block-product-form__blocks {
    display: flex;
    flex-direction: column;
    gap: {{ section.settings.block_gap }}em;
  }

  .block-product-form__block:empty {
    display: none;
  }

  /* Empty state */
  .block-product-form__empty {
    padding: 4em 2em;
    text-align: center;
    opacity: 0.6;
  }

  /* Responsive */
  @media (max-width: 60em) {
    .block-product-form__content {
      flex-wrap: wrap;
    }

    .block-product-form__media {
      flex-grow: 1;
      flex-basis: 100%;
      max-width: 100vw;
    }

    .block-product-form__form {
      flex-grow: 1;
      flex-basis: 100%;
    }
  }

  /* Loading state */
  [data-product-form] {
    transition: opacity 200ms ease;
  }

  [data-product-form].is-loading {
    opacity: 0.6;
    pointer-events: none;
  }

  /* Smooth transitions voor fragment updates */
  [data-fragment-update] {
    transition: opacity 150ms ease;
  }

  /*
    ============================================================================
    LOADING STATE UTILITIES
    ============================================================================
    Het product form krijgt .is-loading tijdens variant updates.
    Gebruik deze classes om elementen te verbergen/tonen tijdens laden.
    
    BESCHIKBARE STATES:
    - [data-product-form].is-loading    → wrapper tijdens fetch
    - [data-fragment-update]            → elementen die worden geüpdatet
    
    HULPKLASSEN:
    - .hide-while-loading               → verberg element tijdens laden
    - .show-while-loading               → toon element alleen tijdens laden
    - .no-transition-while-loading      → voorkom transitions tijdens laden
    
    VOORBEELDEN:
    
    1. Verberg een app-knop tijdens laden:
       <div class="wc_wl_bis_btn hide-while-loading" ...></div>
    
    2. Toon een loader alleen tijdens laden:
       <div class="my-spinner show-while-loading"></div>
    
    3. Via specifieke selector (als je geen class kan toevoegen):
       [data-product-form].is-loading .wc_wl_bis_btn { opacity: 0; }
    ============================================================================
  */

  /* Verberg elementen tijdens laden */
  [data-product-form].is-loading .hide-while-loading {
    opacity: 0;
    pointer-events: none;
  }

  /* Toon elementen alleen tijdens laden */
  .show-while-loading {
    opacity: 0;
    pointer-events: none;
  }
  [data-product-form].is-loading .show-while-loading {
    opacity: 1;
    pointer-events: auto;
  }

  /* Voorkom layout shift door visibility te gebruiken ipv display */
  [data-product-form].is-loading .invisible-while-loading {
    visibility: hidden;
  }

  /*
    APP-SPECIFIEKE FIXES
    Voeg hier selectors toe voor third-party apps die moeten 
    verbergen/aanpassen tijdens variant updates.
  */
  
  /* Wishlist Club - back in stock button */
  [data-product-form].is-loading .wc_wl_bis_btn {
    opacity: 0;
  }
  .wc_wl_bis_btn {
    transition: opacity 150ms ease;
  }
  
  .block-product-form__form .product-stock--low-in-stock,
  .block-product-form__form .product-stock--low-in-stock-backorder {
	  background-color: #f05a22; color:#fff;
  }

  /* Price sizing in product form */
  .block-product-form__form .product-price {
    font-size: 2em;
  }
</style>

<script>
(() => {
  document.querySelectorAll('[data-product-form]').forEach(wrapper => {
    const sectionId = wrapper.dataset.sectionId;
    const product = JSON.parse(wrapper.dataset.productJson || '{}');
    const form = wrapper.querySelector('form');
    if (!sectionId || !form) return;

    // Variant change handler
    form.addEventListener('change', (e) => {
      const target = e.target;
      if (!target.matches('[data-option-select], [name^="options["]')) return;
      
      e.stopImmediatePropagation();
      e.stopPropagation();

      // Bepaal variant uit geselecteerde opties
      const options = (product.options || []).map((name, idx) => {
        const select = wrapper.querySelector(`[data-option-select][data-option-index="${idx}"]`);
        if (select) return select.value;
        const radio = wrapper.querySelector(`input[name="options[${name}]"]:checked`);
        return radio?.value || null;
      });
      
      const variant = product.variants?.find(v => 
        v.options.every((val, i) => val === options[i])
      );
      
      if (!variant) return;

      // Update hidden input
      const variantInput = wrapper.querySelector('[data-variant-id]');
      if (variantInput) variantInput.value = variant.id;

      // Fetch nieuwe HTML (setTimeout voor isolatie van andere scripts)
      setTimeout(async () => {
        wrapper.classList.add('is-loading');
        
        try {
          const url = new URL(window.location.href);
          url.searchParams.set('variant', variant.id);
          url.searchParams.set('section_id', sectionId);
          
          // XMLHttpRequest ipv fetch (sommige apps patchen fetch)
          const html = await new Promise((resolve, reject) => {
            const xhr = new XMLHttpRequest();
            xhr.open('GET', url.toString());
            xhr.onload = () => resolve(xhr.responseText);
            xhr.onerror = () => reject(new Error('XHR failed'));
            xhr.send();
          });
          
          const doc = new DOMParser().parseFromString(html, 'text/html');
          
          // Vervang alleen elementen met data-fragment-update
          wrapper.querySelectorAll('[data-fragment-update]').forEach(oldEl => {
            const key = oldEl.dataset.fragmentUpdate;
            const newEl = doc.querySelector(`[data-fragment-update="${key}"]`);
            if (newEl) {
              oldEl.style.opacity = '0';
              setTimeout(() => {
                oldEl.innerHTML = newEl.innerHTML;
                oldEl.style.opacity = '';
              }, 150);
            }
          });

          // Update URL
          history.replaceState({}, '', `?variant=${variant.id}`);

          // Dispatch event
          wrapper.dispatchEvent(new CustomEvent('product:updated', {
            detail: { variantId: variant.id, variant, product },
            bubbles: true
          }));
          
        } catch (err) {
          console.error('Variant update failed:', err);
        } finally {
          wrapper.classList.remove('is-loading');
        }
      }, 0);
    }, true);
  });
})();
</script>

{%- schema -%}
{
	"name": "Product form",
	"tag": "section",
	"class": "block-product-form",
	"limit": 1,
	"enabled_on": {
		"templates": ["product"]
	},
	"settings": [
		{
			"type": "header",
			"content": "Content"
		},
		{
			"type": "product",
			"id": "product",
			"label": "Product"
		},
		{
			"type": "header",
			"content": "Layout"
		},
		{
			"type": "select",
			"id": "width",
			"label": "Width",
			"options": [
				{ "value": "is-align-narrow", "label": "Narrow" },
				{ "value": "is-align-small", "label": "Small" },
				{ "value": "is-align", "label": "Regular" },
				{ "value": "is-align-wide", "label": "Wide" },
				{ "value": "is-align-full", "label": "Full" }
			],
			"default": "is-align-wide"
		},
		{
			"type": "range",
			"id": "block_gap",
			"label": "Block spacing",
			"min": 0,
			"max": 2,
			"step": 0.1,
			"default": 0.8,
			"unit": "em"
		},
		{
			"type": "header",
			"content": "Colors"
		},
		{
			"type": "color",
			"id": "background_color",
			"label": "Background"
		},
		{
			"type": "color",
			"id": "text_color",
			"label": "Text"
		},
		{
			"type": "header",
			"content": "Howto"
		},
		{
			"type": "paragraph",
			"content": "Main product form with media gallery and configurable blocks. Add blocks for rating, heading, price, variant picker, add to cart, etc."
		}
	],
	"blocks": [
		{
			"type": "rating",
			"name": "Rating",
			"limit": 1,
			"settings": [
				{
					"type": "text",
					"id": "scroll_target",
					"label": "Scroll target",
					"placeholder": "#reviews"
				},
				{
					"type": "checkbox",
					"id": "show_count",
					"label": "Show review count",
					"default": true
				},
				{
					"type": "range",
					"id": "size",
					"label": "Star size",
					"min": 12,
					"max": 24,
					"step": 2,
					"default": 16,
					"unit": "px"
				}
			]
		},
		{
			"type": "heading",
			"name": "Heading",
			"limit": 1,
			"settings": [
				{
					"type": "checkbox",
					"id": "show_vendor",
					"label": "Show vendor",
					"default": true
				}
			]
		},
		{
			"type": "price",
			"name": "Price",
			"limit": 1,
			"settings": [
				{
					"type": "paragraph",
					"content": "Compare at price and tax notice settings are in Theme Settings → Product."
				}
			]
		},
		{
			"type": "description",
			"name": "Description",
			"limit": 1,
			"settings": [
				{
					"type": "checkbox",
					"id": "truncate",
					"label": "Truncate description",
					"default": false
				},
				{
					"type": "range",
					"id": "words",
					"label": "Word limit",
					"min": 10,
					"max": 100,
					"step": 5,
					"default": 30
				},
				{
					"type": "text",
					"id": "read_more_target",
					"label": "Read more target",
					"placeholder": "#product-information"
				}
			]
		},
		{
			"type": "variant_picker",
			"name": "Variant picker",
			"limit": 1,
			"settings": [
				{
					"type": "range",
					"id": "threshold_dropdown",
					"label": "Dropdown threshold",
					"min": 0,
					"max": 20,
					"step": 1,
					"default": 10
				}
			]
		},
		{
			"type": "notify",
			"name": "Back in stock",
			"limit": 1,
			"settings": []
		},
		{
			"type": "upsell",
			"name": "Upsell",
			"limit": 1,
			"settings": []
		},
		{
			"type": "stock",
			"name": "Stock",
			"limit": 1,
			"settings": [
				{
					"type": "paragraph",
					"content": "Threshold is set in Theme Settings → Product."
				},
				{
					"type": "checkbox",
					"id": "show_stock_count",
					"label": "Show stock count",
					"info": "Backorder products always show 'In stock' without count",
					"default": true
				}
			]
		},
		{
			"type": "delivery",
			"name": "Delivery",
			"limit": 1,
			"settings": []
		},
		{
			"type": "sku",
			"name": "SKU",
			"limit": 1,
			"settings": [
				{
					"type": "checkbox",
					"id": "show_label",
					"label": "Show label",
					"default": true
				}
			]
		},
		{
			"type": "selling_plans",
			"name": "Selling plans",
			"limit": 1,
			"settings": []
		},
		{
			"type": "atc",
			"name": "Add to cart",
			"limit": 1,
			"settings": [
				{
					"type": "checkbox",
					"id": "full_width",
					"label": "Full width",
					"default": true
				},
				{
					"type": "checkbox",
					"id": "show_quantity",
					"label": "Show quantity input",
					"default": true
				},
				{
					"type": "checkbox",
					"id": "show_wishlist",
					"label": "Show wishlist button",
					"default": true
				}
			]
		},
		{
			"type": "trust_payments",
			"name": "Payment icons",
			"limit": 1,
			"settings": [
				{
					"type": "select",
					"id": "method_1",
					"label": "Method 1",
					"options": [
						{ "value": "none", "label": "None" },
						{ "value": "visa", "label": "Visa" },
						{ "value": "mastercard", "label": "Mastercard" },
						{ "value": "maestro", "label": "Maestro" },
						{ "value": "amex", "label": "American Express" },
						{ "value": "paypal", "label": "PayPal" },
						{ "value": "ideal", "label": "iDEAL" },
						{ "value": "bancontact", "label": "Bancontact" },
						{ "value": "klarna", "label": "Klarna" },
						{ "value": "apple_pay", "label": "Apple Pay" },
						{ "value": "google_pay", "label": "Google Pay" },
						{ "value": "shop_pay", "label": "Shop Pay" },
						{ "value": "blik", "label": "BLIK" },
						{ "value": "unionpay", "label": "Union Pay" }
					],
					"default": "ideal"
				},
				{
					"type": "select",
					"id": "method_2",
					"label": "Method 2",
					"options": [
						{ "value": "none", "label": "None" },
						{ "value": "visa", "label": "Visa" },
						{ "value": "mastercard", "label": "Mastercard" },
						{ "value": "maestro", "label": "Maestro" },
						{ "value": "amex", "label": "American Express" },
						{ "value": "paypal", "label": "PayPal" },
						{ "value": "ideal", "label": "iDEAL" },
						{ "value": "bancontact", "label": "Bancontact" },
						{ "value": "klarna", "label": "Klarna" },
						{ "value": "apple_pay", "label": "Apple Pay" },
						{ "value": "google_pay", "label": "Google Pay" },
						{ "value": "shop_pay", "label": "Shop Pay" },
						{ "value": "blik", "label": "BLIK" },
						{ "value": "unionpay", "label": "Union Pay" }
					],
					"default": "visa"
				},
				{
					"type": "select",
					"id": "method_3",
					"label": "Method 3",
					"options": [
						{ "value": "none", "label": "None" },
						{ "value": "visa", "label": "Visa" },
						{ "value": "mastercard", "label": "Mastercard" },
						{ "value": "maestro", "label": "Maestro" },
						{ "value": "amex", "label": "American Express" },
						{ "value": "paypal", "label": "PayPal" },
						{ "value": "ideal", "label": "iDEAL" },
						{ "value": "bancontact", "label": "Bancontact" },
						{ "value": "klarna", "label": "Klarna" },
						{ "value": "apple_pay", "label": "Apple Pay" },
						{ "value": "google_pay", "label": "Google Pay" },
						{ "value": "shop_pay", "label": "Shop Pay" },
						{ "value": "blik", "label": "BLIK" },
						{ "value": "unionpay", "label": "Union Pay" }
					],
					"default": "mastercard"
				},
				{
					"type": "select",
					"id": "method_4",
					"label": "Method 4",
					"options": [
						{ "value": "none", "label": "None" },
						{ "value": "visa", "label": "Visa" },
						{ "value": "mastercard", "label": "Mastercard" },
						{ "value": "maestro", "label": "Maestro" },
						{ "value": "amex", "label": "American Express" },
						{ "value": "paypal", "label": "PayPal" },
						{ "value": "ideal", "label": "iDEAL" },
						{ "value": "bancontact", "label": "Bancontact" },
						{ "value": "klarna", "label": "Klarna" },
						{ "value": "apple_pay", "label": "Apple Pay" },
						{ "value": "google_pay", "label": "Google Pay" },
						{ "value": "shop_pay", "label": "Shop Pay" },
						{ "value": "blik", "label": "BLIK" },
						{ "value": "unionpay", "label": "Union Pay" }
					],
					"default": "paypal"
				},
				{
					"type": "select",
					"id": "method_5",
					"label": "Method 5",
					"options": [
						{ "value": "none", "label": "None" },
						{ "value": "visa", "label": "Visa" },
						{ "value": "mastercard", "label": "Mastercard" },
						{ "value": "maestro", "label": "Maestro" },
						{ "value": "amex", "label": "American Express" },
						{ "value": "paypal", "label": "PayPal" },
						{ "value": "ideal", "label": "iDEAL" },
						{ "value": "bancontact", "label": "Bancontact" },
						{ "value": "klarna", "label": "Klarna" },
						{ "value": "apple_pay", "label": "Apple Pay" },
						{ "value": "google_pay", "label": "Google Pay" },
						{ "value": "shop_pay", "label": "Shop Pay" },
						{ "value": "blik", "label": "BLIK" },
						{ "value": "unionpay", "label": "Union Pay" }
					],
					"default": "klarna"
				},
				{
					"type": "select",
					"id": "method_6",
					"label": "Method 6",
					"options": [
						{ "value": "none", "label": "None" },
						{ "value": "visa", "label": "Visa" },
						{ "value": "mastercard", "label": "Mastercard" },
						{ "value": "maestro", "label": "Maestro" },
						{ "value": "amex", "label": "American Express" },
						{ "value": "paypal", "label": "PayPal" },
						{ "value": "ideal", "label": "iDEAL" },
						{ "value": "bancontact", "label": "Bancontact" },
						{ "value": "klarna", "label": "Klarna" },
						{ "value": "apple_pay", "label": "Apple Pay" },
						{ "value": "google_pay", "label": "Google Pay" },
						{ "value": "shop_pay", "label": "Shop Pay" },
						{ "value": "blik", "label": "BLIK" },
						{ "value": "unionpay", "label": "Union Pay" }
					],
					"default": "none"
				},
				{
					"type": "select",
					"id": "method_7",
					"label": "Method 7",
					"options": [
						{ "value": "none", "label": "None" },
						{ "value": "visa", "label": "Visa" },
						{ "value": "mastercard", "label": "Mastercard" },
						{ "value": "maestro", "label": "Maestro" },
						{ "value": "amex", "label": "American Express" },
						{ "value": "paypal", "label": "PayPal" },
						{ "value": "ideal", "label": "iDEAL" },
						{ "value": "bancontact", "label": "Bancontact" },
						{ "value": "klarna", "label": "Klarna" },
						{ "value": "apple_pay", "label": "Apple Pay" },
						{ "value": "google_pay", "label": "Google Pay" },
						{ "value": "shop_pay", "label": "Shop Pay" },
						{ "value": "blik", "label": "BLIK" },
						{ "value": "unionpay", "label": "Union Pay" }
					],
					"default": "none"
				},
				{
					"type": "select",
					"id": "method_8",
					"label": "Method 8",
					"options": [
						{ "value": "none", "label": "None" },
						{ "value": "visa", "label": "Visa" },
						{ "value": "mastercard", "label": "Mastercard" },
						{ "value": "maestro", "label": "Maestro" },
						{ "value": "amex", "label": "American Express" },
						{ "value": "paypal", "label": "PayPal" },
						{ "value": "ideal", "label": "iDEAL" },
						{ "value": "bancontact", "label": "Bancontact" },
						{ "value": "klarna", "label": "Klarna" },
						{ "value": "apple_pay", "label": "Apple Pay" },
						{ "value": "google_pay", "label": "Google Pay" },
						{ "value": "shop_pay", "label": "Shop Pay" },
						{ "value": "blik", "label": "BLIK" },
						{ "value": "unionpay", "label": "Union Pay" }
					],
					"default": "none"
				},
				{
					"type": "select",
					"id": "method_9",
					"label": "Method 9",
					"options": [
						{ "value": "none", "label": "None" },
						{ "value": "visa", "label": "Visa" },
						{ "value": "mastercard", "label": "Mastercard" },
						{ "value": "maestro", "label": "Maestro" },
						{ "value": "amex", "label": "American Express" },
						{ "value": "paypal", "label": "PayPal" },
						{ "value": "ideal", "label": "iDEAL" },
						{ "value": "bancontact", "label": "Bancontact" },
						{ "value": "klarna", "label": "Klarna" },
						{ "value": "apple_pay", "label": "Apple Pay" },
						{ "value": "google_pay", "label": "Google Pay" },
						{ "value": "shop_pay", "label": "Shop Pay" },
						{ "value": "blik", "label": "BLIK" },
						{ "value": "unionpay", "label": "Union Pay" }
					],
					"default": "none"
				},
				{
					"type": "select",
					"id": "method_10",
					"label": "Method 10",
					"options": [
						{ "value": "none", "label": "None" },
						{ "value": "visa", "label": "Visa" },
						{ "value": "mastercard", "label": "Mastercard" },
						{ "value": "maestro", "label": "Maestro" },
						{ "value": "amex", "label": "American Express" },
						{ "value": "paypal", "label": "PayPal" },
						{ "value": "ideal", "label": "iDEAL" },
						{ "value": "bancontact", "label": "Bancontact" },
						{ "value": "klarna", "label": "Klarna" },
						{ "value": "apple_pay", "label": "Apple Pay" },
						{ "value": "google_pay", "label": "Google Pay" },
						{ "value": "shop_pay", "label": "Shop Pay" },
						{ "value": "blik", "label": "BLIK" },
						{ "value": "unionpay", "label": "Union Pay" }
					],
					"default": "none"
				}
			]
		},
		{
			"type": "dynamic_checkout",
			"name": "Dynamic checkout",
			"limit": 1,
			"settings": []
		},
		{
			"type": "trust_usps",
			"name": "Trust USPs",
			"limit": 1,
			"settings": [
				{
					"type": "header",
					"content": "Item 1"
				},
				{
					"type": "text",
					"id": "item_1_text",
					"label": "Text",
					"placeholder": "Money back guarantee"
				},
				{
					"type": "url",
					"id": "item_1_url",
					"label": "Link"
				},
				{
					"type": "header",
					"content": "Item 2"
				},
				{
					"type": "text",
					"id": "item_2_text",
					"label": "Text",
					"placeholder": "Worldwide shipping"
				},
				{
					"type": "url",
					"id": "item_2_url",
					"label": "Link"
				},
				{
					"type": "header",
					"content": "Item 3"
				},
				{
					"type": "text",
					"id": "item_3_text",
					"label": "Text",
					"placeholder": "Track your delivery"
				},
				{
					"type": "url",
					"id": "item_3_url",
					"label": "Link"
				},
				{
					"type": "header",
					"content": "Item 4"
				},
				{
					"type": "text",
					"id": "item_4_text",
					"label": "Text",
					"placeholder": "Lifetime warranty"
				},
				{
					"type": "url",
					"id": "item_4_url",
					"label": "Link"
				}
			]
		},
		{
			"type": "trust_identity",
			"name": "Identity check",
			"limit": 1,
			"settings": [
				{
					"type": "text",
					"id": "tag",
					"label": "Tag",
					"placeholder": "ID check"
				},
				{
					"type": "image_picker",
					"id": "icon",
					"label": "Icon"
				},
				{
					"type": "textarea",
					"id": "message",
					"label": "Message",
					"placeholder": "This item is only sold to 18+. We will ship your order after ID verification."
				}
			]
		},
		{
			"type": "@app"
		}
	],
	"presets": [
		{
			"name": "Form",
			"category": "Product",
			"blocks": [
				{ "type": "rating" },
				{ "type": "heading" },
				{ "type": "price" },
				{ "type": "description" },
				{ "type": "variant_picker" },
				{ "type": "notify" },
				{ "type": "upsell" },
				{ "type": "stock" },
				{ "type": "atc" },
				{ "type": "trust_payments" },
				{ "type": "dynamic_checkout" },
				{ "type": "trust_usps" },
				{ "type": "trust_identity" }
			]
		}
	]
}
{%- endschema -%}