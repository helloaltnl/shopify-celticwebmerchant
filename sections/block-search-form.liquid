{%- comment -%}
	============================================================================
	BLOCK-SEARCH-FORM
	============================================================================
	Search form for search template.
	
	FEATURES:
	- Uses html-form-search snippet (consistent with overlay)
	- Results count display
	- Responsive design
	
	DEPENDENCIES:
	- html-form-search snippet
	- Locale keys: search.*
	============================================================================
{%- endcomment -%}

<div class="block-search-form__content {{ section.settings.width }}{% if section.settings.custom_class != blank %} {{ section.settings.custom_class }}{% endif %}"{% if section.settings.anchor != blank %} id="{{ section.settings.anchor }}"{% endif %}>
	<h1 class="block-search-form__title">{{ 'search.title' | t }}</h1>

	<div class="block-search-form__form">
		{%- render 'html-form-search', 
			input_id: 'search-page-input',
			enable_predictive: false,
			autofocus: true,
			show_submit: true
		-%}
	</div>

	{%- if search.performed -%}
		<p class="block-search-form__count">
			{%- if search.results_count == 0 -%}
				{{ 'search.no_results' | t: terms: search.terms }}
			{%- else -%}
				{{ 'search.results_count' | t: terms: search.terms, count: search.results_count }}
			{%- endif -%}
		</p>
	{%- endif -%}
</div>

<style>
	#shopify-section-{{ section.id }}.block-search-form {
		background-color: {{ section.settings.background_color | default: 'transparent' }};
		color: {{ section.settings.text_color | default: 'inherit' }};
		padding-block: {{ section.settings.padding_block }}em;
	}

	#shopify-section-{{ section.id }} .block-search-form__content {
		display: flex;
		flex-direction: column;
		gap: 0.75rem;
	}

	#shopify-section-{{ section.id }} .block-search-form__title {
		font-family: var(--theme-font-family-serif);
		font-size: 1.5em;
		font-weight: 400;
		margin: 0;
		text-align: center;
	}

	#shopify-section-{{ section.id }} .block-search-form__form {
		width: 100%;
	}

	#shopify-section-{{ section.id }} .block-search-form__count {
		font-size: 0.9em;
		opacity: 0.7;
		margin: 0;
		text-align: center;
	}
</style>

{% schema %}
{
	"name": "Search form",
	"tag": "section",
	"class": "block-search-form",
	"limit": 1,
	"enabled_on": {
		"templates": ["search"]
	},
	"settings": [
		{
			"type": "header",
			"content": "Layout"
		},
		{
			"type": "select",
			"id": "width",
			"label": "Width",
			"options": [
				{ "value": "is-align-narrow", "label": "Narrow" },
				{ "value": "is-align-small", "label": "Small" },
				{ "value": "is-align", "label": "Regular" },
				{ "value": "is-align-wide", "label": "Wide" },
				{ "value": "is-align-full", "label": "Full" }
			],
			"default": "is-align"
		},
		{
			"type": "range",
			"id": "padding_block",
			"label": "Vertical padding",
			"min": 0,
			"max": 6,
			"step": 0.5,
			"default": 1.5,
			"unit": "em"
		},
		{
			"type": "header",
			"content": "Colors"
		},
		{
			"type": "color",
			"id": "background_color",
			"label": "Background"
		},
		{
			"type": "color",
			"id": "text_color",
			"label": "Text"
		},
		{
			"type": "header",
			"content": "Advanced"
		},
		{
			"type": "text",
			"id": "anchor",
			"label": "Anchor",
			"info": "ID for scroll links (without #)"
		},
		{
			"type": "text",
			"id": "custom_class",
			"label": "Custom class",
			"info": "Add custom CSS class"
		},
		{
			"type": "header",
			"content": "Howto"
		},
		{
			"type": "paragraph",
			"content": "Search form for search results page. Uses html-form-search snippet."
		}
	],
	"presets": [
		{
			"name": "Form",
			"category": "Search"
		}
	]
}
{% endschema %}
