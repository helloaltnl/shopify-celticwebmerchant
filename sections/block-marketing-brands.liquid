{%- liquid
  assign heading = section.settings.heading
  assign menu_handle = 'merk-menu'
  assign menu = linklists[menu_handle]
-%}

<section class="block-marketing-brands-content">
  {%- if heading != blank -%}
    <div class="block-marketing-brands__heading">
      <h2>{{ heading }}</h2>
    </div>
  {%- endif -%}

  <div class="block-marketing-brands__content">
    {%- if menu.links.size > 0 -%}
      <div class="block-marketing-brands__grid">
        {%- for link in menu.links -%}
          {%- liquid
            assign collection = collections[link.object.handle]
            if collection == blank
              assign collection = link.object
            endif
          -%}
          
          {%- if collection -%}
            <a href="{{ collection.url }}" class="block-marketing-brands__item">
              {%- if collection.image or collection.featured_image -%}
                {%- liquid
                  assign brand_image = collection.image
                  if brand_image == blank
                    assign brand_image = collection.featured_image
                  endif
                -%}
                <div class="block-marketing-brands__image">
                  {{ brand_image | image_url: width: 400 | image_tag: loading: 'lazy', alt: collection.title }}
                </div>
              {%- endif -%}
              
              <div class="block-marketing-brands__title">
                <h3>{{ collection.title }}</h3>
              </div>
            </a>
          {%- endif -%}
        {%- endfor -%}
      </div>
    {%- else -%}
      <p class="block-marketing-brands__empty">
        Geen merken gevonden. Zorg ervoor dat het menu "{{ menu_handle }}" bestaat en gevuld is met collections.
      </p>
    {%- endif -%}
  </div>
</section>

{%- style -%}
  .block-marketing-brands {
    padding: {{ section.settings.padding_top }}px 0 {{ section.settings.padding_bottom }}px;
  }

  .block-marketing-brands-content {
    max-width: {{ section.settings.container_width }}px;
    margin: 0 auto;
    padding: 0 20px;
  }

  .block-marketing-brands__heading {
    text-align: center;
    margin-bottom: 40px;
  }

  .block-marketing-brands__heading h2 {
    font-size: 2rem;
    font-weight: 700;
    margin: 0;
  }

  .block-marketing-brands__grid {
    display: grid;
    grid-template-columns: repeat({{ section.settings.columns_mobile }}, 1fr);
    gap: {{ section.settings.gap }}px;
  }

  @media (min-width: 768px) {
    .block-marketing-brands__grid {
      grid-template-columns: repeat({{ section.settings.columns_tablet }}, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .block-marketing-brands__grid {
      grid-template-columns: repeat({{ section.settings.columns_desktop }}, 1fr);
    }
  }

  .block-marketing-brands__item {
    display: block;
    text-decoration: none;
    color: inherit;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border: 1px solid #e5e5e5;
    border-radius: {{ section.settings.border_radius }}px;
    overflow: hidden;
    background: #fff;
  }

  .block-marketing-brands__item:hover {
    transform: translateY(-4px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  .block-marketing-brands__image {
    width: 100%;
    aspect-ratio: {{ section.settings.image_ratio }};
    overflow: hidden;
    background: #f5f5f5;
  }

  .block-marketing-brands__image img {
    width: 100%;
    height: 100%;
    object-fit: {{ section.settings.image_fit }};
  }

  .block-marketing-brands__title {
    padding: 20px;
    text-align: center;
  }

  .block-marketing-brands__title h3 {
    font-size: 1.125rem;
    font-weight: 600;
    margin: 0;
  }

  .block-marketing-brands__empty {
    text-align: center;
    padding: 40px 20px;
    color: #666;
  }
{%- endstyle -%}

{% schema %}
{
  "name": "Marketing Brands",
  "tag": "section",
  "class": "block-marketing-brands",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Onze Merken"
    },
    {
      "type": "header",
      "content": "Layout Settings"
    },
    {
      "type": "range",
      "id": "columns_mobile",
      "label": "Columns (Mobile)",
      "min": 1,
      "max": 3,
      "step": 1,
      "default": 2
    },
    {
      "type": "range",
      "id": "columns_tablet",
      "label": "Columns (Tablet)",
      "min": 2,
      "max": 4,
      "step": 1,
      "default": 3
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "label": "Columns (Desktop)",
      "min": 2,
      "max": 6,
      "step": 1,
      "default": 4
    },
    {
      "type": "range",
      "id": "gap",
      "label": "Grid Gap",
      "min": 0,
      "max": 60,
      "step": 4,
      "unit": "px",
      "default": 20
    },
    {
      "type": "header",
      "content": "Image Settings"
    },
    {
      "type": "select",
      "id": "image_ratio",
      "label": "Image Aspect Ratio",
      "options": [
        {
          "value": "1 / 1",
          "label": "Square (1:1)"
        },
        {
          "value": "4 / 3",
          "label": "Landscape (4:3)"
        },
        {
          "value": "16 / 9",
          "label": "Wide (16:9)"
        },
        {
          "value": "3 / 4",
          "label": "Portrait (3:4)"
        }
      ],
      "default": "1 / 1"
    },
    {
      "type": "select",
      "id": "image_fit",
      "label": "Image Fit",
      "options": [
        {
          "value": "cover",
          "label": "Cover"
        },
        {
          "value": "contain",
          "label": "Contain"
        }
      ],
      "default": "contain"
    },
    {
      "type": "header",
      "content": "Styling"
    },
    {
      "type": "range",
      "id": "border_radius",
      "label": "Border Radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "default": 0
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "container_width",
      "label": "Container Width",
      "min": 1000,
      "max": 1600,
      "step": 100,
      "unit": "px",
      "default": 1400
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding Top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding Bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "default": 60
    }
  ],
  "presets": [
    {
      "name": "Marketing Brands",
      "category": "Theme Marketing"
    }
  ]
}
{% endschema %}
