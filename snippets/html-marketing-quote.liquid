{%- comment -%}
============================================================================
HTML-MARKETING-QUOTE
============================================================================
Reusable testimonial/quote component.

PARAMS:
- quote         : Quote text (required)
- author        : Author name
- author_title  : Author title/position
- author_image  : Author photo (image object)
- rating        : Star rating 0-5 (default: 0)
- alignment     : left | center (default: center)
- style         : minimal | boxed | accent (default: minimal)

USAGE:
{%- render 'html-marketing-quote',
    quote: block.settings.quote,
    author: block.settings.author,
    author_title: block.settings.author_title,
    author_image: block.settings.author_image,
    rating: block.settings.rating,
    alignment: 'center',
    style: 'boxed'
-%}

STYLING:
Sections can override with scoped CSS:
#shopify-section-{{ section.id }} .marketing-quote { ... }
============================================================================
{%- endcomment -%}

{%- liquid
	assign quote = quote | default: ''
	assign author = author | default: ''
	assign author_title = author_title | default: ''
	assign author_image = author_image | default: nil
	assign rating = rating | default: 0
	assign alignment = alignment | default: 'center'
	assign style = style | default: 'minimal'
-%}

{%- if quote != blank -%}
<blockquote class="marketing-quote marketing-quote--{{ style }} marketing-quote--align-{{ alignment }}">
	{%- if rating > 0 -%}
		<div class="marketing-quote__rating" role="img" aria-label="{{ 'general.rating' | t | default: 'Rating' }}: {{ rating }}/5">
			{%- for i in (1..5) -%}
				<span class="marketing-quote__star{% if i <= rating %} marketing-quote__star--filled{% endif %}">â˜…</span>
			{%- endfor -%}
		</div>
	{%- endif -%}
	
	<p class="marketing-quote__text">{{ quote }}</p>
	
	{%- if author != blank or author_image != blank -%}
		<footer class="marketing-quote__footer">
			{%- if author_image != blank -%}
				<div class="marketing-quote__avatar">
					<img
						src="{{ author_image | image_url: width: 120 }}"
						alt="{{ author | escape }}"
						width="60"
						height="60"
						loading="lazy"
					>
				</div>
			{%- endif -%}
			
			<div class="marketing-quote__author">
				{%- if author != blank -%}
					<cite class="marketing-quote__name">{{ author | escape }}</cite>
				{%- endif -%}
				{%- if author_title != blank -%}
					<p class="marketing-quote__title">{{ author_title | escape }}</p>
				{%- endif -%}
			</div>
		</footer>
	{%- endif -%}
</blockquote>
{%- endif -%}

<style>
.marketing-quote {
	display: flex;
	flex-direction: column;
	height: 100%;
	margin: 0;
	padding: 0;
}

/* Style variations */
.marketing-quote--minimal {
	padding: 1em 0;
}

.marketing-quote--boxed {
	padding: 2em;
	border: 1px solid var(--theme-color-border, rgba(0, 0, 0, 0.1));
}

.marketing-quote--accent {
	padding: 1em 0 1em 2em;
	border-left: 4px solid var(--theme-color-blue, #0f1f38);
}

/* Alignment */
.marketing-quote--align-left { text-align: left; }
.marketing-quote--align-center { text-align: center; }

/* Rating */
.marketing-quote__rating {
	margin-bottom: 1em;
	font-size: 1.25em;
	letter-spacing: 0.1em;
}

.marketing-quote__star {
	color: var(--theme-color-border, rgba(0, 0, 0, 0.2));
}

.marketing-quote__star--filled {
	color: #f5a623;
}

/* Quote text */
.marketing-quote__text {
	font-family: var(--theme-font-family-serif);
	font-size: 1.25em;
	font-style: italic;
	line-height: 1.6;
	margin: 0 0 1.5em;
}

.marketing-quote__text::before { content: '"'; }
.marketing-quote__text::after { content: '"'; }

/* Footer */
.marketing-quote__footer {
	display: flex;
	align-items: center;
	gap: 1em;
	margin-top: auto;
}

.marketing-quote--align-center .marketing-quote__footer {
	justify-content: center;
}

/* Avatar */
.marketing-quote__avatar {
	flex-shrink: 0;
}

.marketing-quote__avatar img {
	width: 3.75em;
	height: 3.75em;
	border-radius: 50%;
	object-fit: cover;
}

/* Author */
.marketing-quote__author {
	text-align: left;
}

.marketing-quote__name {
	display: block;
	font-family: var(--theme-font-family-sans);
	font-size: 1em;
	font-style: normal;
	font-weight: 600;
}

.marketing-quote__title {
	font-size: 0.875em;
	opacity: 0.7;
	margin: 0.25em 0 0;
}

/* Responsive */
@media (max-width: 40em) {
	.marketing-quote__text {
		font-size: 1.125em;
	}

	.marketing-quote--boxed {
		padding: 1.5em;
	}
}
</style>
