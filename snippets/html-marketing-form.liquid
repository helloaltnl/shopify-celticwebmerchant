{% comment %}
  HTML Marketing Component: Form
  Newsletter/contact form
  
  Parameters:
  - heading: {String} Form heading
  - text: {String} Form description text
  - type: {String} newsletter | contact - default: newsletter
  - placeholder: {String} Input placeholder text
  - button_text: {String} Submit button text - default: "Subscribe"
  - layout: {String} inline | stacked - default: inline
  - alignment: {String} left | center - default: center
{% endcomment %}

{%- liquid
  assign heading = heading | default: ''
  assign text = text | default: ''
  assign type = type | default: 'newsletter'
  assign placeholder = placeholder | default: 'Enter your email'
  assign button_text = button_text | default: 'Subscribe'
  assign layout = layout | default: 'inline'
  assign alignment = alignment | default: 'center'
  
  assign form_id = 'marketing-form-' | append: section.id | append: '-' | append: block.id
-%}

<div class="marketing-form marketing-form--{{ layout }} marketing-form--align-{{ alignment }}">
  <div class="marketing-form__header">
    {%- if heading != blank -%}
      <h3 class="marketing-form__heading">{{ heading | escape }}</h3>
    {%- endif -%}
    
    {%- if text != blank -%}
      <p class="marketing-form__text">{{ text }}</p>
    {%- endif -%}
  </div>
  
  {%- if type == 'newsletter' -%}
    {% form 'customer', id: form_id, class: 'marketing-form__form' %}
      <input type="hidden" name="contact[tags]" value="newsletter">
      
      <div class="marketing-form__field">
        <label for="{{ form_id }}-email" class="marketing-form__label visually-hidden">Email address</label>
        <input
          type="email"
          name="contact[email]"
          id="{{ form_id }}-email"
          class="marketing-form__input"
          placeholder="{{ placeholder | escape }}"
          required
          autocomplete="email"
        />
      </div>
      
      <button type="submit" class="marketing-form__button">
        {{ button_text | escape }}
      </button>
      
      {%- if form.posted_successfully? -%}
        <div class="marketing-form__message marketing-form__message--success">
          Thanks for subscribing!
        </div>
      {%- endif -%}
      
      {%- if form.errors -%}
        <div class="marketing-form__message marketing-form__message--error">
          {{ form.errors | default_errors }}
        </div>
      {%- endif -%}
    {% endform %}
  {%- elsif type == 'contact' -%}
    {% form 'contact', id: form_id, class: 'marketing-form__form marketing-form__form--contact' %}
      <div class="marketing-form__field">
        <label for="{{ form_id }}-name" class="marketing-form__label">Name</label>
        <input
          type="text"
          name="contact[name]"
          id="{{ form_id }}-name"
          class="marketing-form__input"
          required
        />
      </div>
      
      <div class="marketing-form__field">
        <label for="{{ form_id }}-email" class="marketing-form__label">Email</label>
        <input
          type="email"
          name="contact[email]"
          id="{{ form_id }}-email"
          class="marketing-form__input"
          required
          autocomplete="email"
        />
      </div>
      
      <div class="marketing-form__field">
        <label for="{{ form_id }}-message" class="marketing-form__label">Message</label>
        <textarea
          name="contact[body]"
          id="{{ form_id }}-message"
          class="marketing-form__textarea"
          rows="5"
          required
        ></textarea>
      </div>
      
      <button type="submit" class="marketing-form__button">
        {{ button_text | escape }}
      </button>
      
      {%- if form.posted_successfully? -%}
        <div class="marketing-form__message marketing-form__message--success">
          Thanks for contacting us! We'll get back to you soon.
        </div>
      {%- endif -%}
      
      {%- if form.errors -%}
        <div class="marketing-form__message marketing-form__message--error">
          {{ form.errors | default_errors }}
        </div>
      {%- endif -%}
    {% endform %}
  {%- endif -%}
</div>

<style>
  .marketing-form {
    padding: 2rem 0;
  }
  
  /* Alignment */
  .marketing-form--align-left {
    text-align: left;
  }
  
  .marketing-form--align-left .marketing-form__header,
  .marketing-form--align-left .marketing-form__form {
    margin-left: 0;
    margin-right: auto;
  }
  
  .marketing-form--align-center {
    text-align: center;
  }
  
  .marketing-form--align-center .marketing-form__header,
  .marketing-form--align-center .marketing-form__form {
    margin-left: auto;
    margin-right: auto;
  }
  
  /* Header */
  .marketing-form__header {
    max-width: 600px;
    margin-bottom: 1.5rem;
  }
  
  .marketing-form__heading {
    font-size: 2rem;
    font-weight: 700;
    margin: 0 0 0.75rem;
  }
  
  .marketing-form__text {
    font-size: 1rem;
    line-height: 1.6;
    margin: 0;
    color: #666;
  }
  
  /* Form */
  .marketing-form__form {
    max-width: 600px;
  }
  
  .marketing-form--inline .marketing-form__form {
    display: flex;
    gap: 0.5rem;
    align-items: flex-start;
  }
  
  .marketing-form--stacked .marketing-form__form,
  .marketing-form__form--contact {
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }
  
  /* Field */
  .marketing-form__field {
    flex: 1;
  }
  
  .marketing-form__label {
    display: block;
    margin-bottom: 0.5rem;
    font-weight: 600;
    font-size: 0.875rem;
  }
  
  .marketing-form__label.visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
  
  /* Input */
  .marketing-form__input,
  .marketing-form__textarea {
    width: 100%;
    padding: 0.75rem 1rem;
    font-size: 1rem;
    border: 1px solid #ccc;
    border-radius: 4px;
    font-family: inherit;
  }
  
  .marketing-form__input:focus,
  .marketing-form__textarea:focus {
    outline: 2px solid #000;
    outline-offset: 2px;
    border-color: #000;
  }
  
  .marketing-form__textarea {
    resize: vertical;
  }
  
  /* Button */
  .marketing-form__button {
    padding: 0.75rem 2rem;
    font-size: 1rem;
    font-weight: 600;
    background-color: #000;
    color: #fff;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.2s ease;
    white-space: nowrap;
  }
  
  .marketing-form__button:hover {
    background-color: #333;
  }
  
  .marketing-form--stacked .marketing-form__button,
  .marketing-form__form--contact .marketing-form__button {
    align-self: flex-start;
  }
  
  .marketing-form--align-center.marketing-form--stacked .marketing-form__button {
    align-self: center;
  }
  
  /* Messages */
  .marketing-form__message {
    margin-top: 1rem;
    padding: 0.75rem 1rem;
    border-radius: 4px;
    font-size: 0.875rem;
  }
  
  .marketing-form__message--success {
    background-color: #e8f5e9;
    color: #2e7d32;
  }
  
  .marketing-form__message--error {
    background-color: #ffebee;
    color: #c62828;
  }
  
  /* Responsive */
  @media (max-width: 749px) {
    .marketing-form--inline .marketing-form__form {
      flex-direction: column;
    }
    
    .marketing-form__button {
      width: 100%;
    }
  }
</style>
