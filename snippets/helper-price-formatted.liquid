{%- comment -%}
  Renders a single price with custom spans.
  Accepts:
  - amount: number (required) — in cents (bv. product.price)
  - currency_symbol: string (optional) — default cart.currency.symbol

  Example:
  {% render 'price-formatted', amount: product.price %}
{%- endcomment -%}

{%- assign symbol = currency_symbol | default: cart.currency.symbol -%}
{%- assign formatted = amount | money_without_currency -%}

{%- comment -%}
  Bepaal decimaal-scheider robuust:
  1) Kijk of split op ',' een 2-cijferstaart geeft → decimaal = ','
  2) Anders kijk '.' → decimaal = '.'
  3) Anders: geen decimals → toon ,00 (of laat 'after' op '00')
{%- endcomment -%}
{%- assign dec_sep = '' -%}
{%- assign tail_comma = formatted | split: ',' | last -%}
{%- if tail_comma != formatted and tail_comma.size == 2 -%}
  {%- assign dec_sep = ',' -%}
{%- else -%}
  {%- assign tail_dot = formatted | split: '.' | last -%}
  {%- if tail_dot != formatted and tail_dot.size == 2 -%}
	{%- assign dec_sep = '.' -%}
  {%- endif -%}
{%- endif -%}

{%- if dec_sep != '' -%}
  {%- assign before = formatted | split: dec_sep | first -%}
  {%- assign after = formatted | split: dec_sep | last -%}
{%- else -%}
  {%- assign before = formatted -%}
  {%- assign after = '00' -%}
  {%- assign dec_sep = ',' -%} {# fallback visueel #}
{%- endif -%}

<span class="price">
  <span class="valuta">{{ symbol }}</span>
  <span class="before_seperator">{{ before }}</span>
  <span class="seperator">{{ dec_sep }}</span>
  <span class="after_seperator">{{ after }}</span>
</span>