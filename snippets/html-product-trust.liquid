{%- comment -%}
  ============================================================================
  HTML-PRODUCT-TRUST
  ============================================================================
  Trust badges/USPs displayed near the add to cart button.

  PARAMETERS:
  - product: {Object} Product object (required)
  - item_1_text, item_1_url: First trust item
  - item_2_text, item_2_url: Second trust item
  - item_3_text, item_3_url: Third trust item
  - item_4_text, item_4_url: Fourth trust item
  ============================================================================
{%- endcomment -%}

{%- liquid
  assign items = ''
  
  if item_1_text != blank
    assign items = items | append: item_1_text | append: '||' | append: item_1_url | append: ';;'
  endif
  if item_2_text != blank
    assign items = items | append: item_2_text | append: '||' | append: item_2_url | append: ';;'
  endif
  if item_3_text != blank
    assign items = items | append: item_3_text | append: '||' | append: item_3_url | append: ';;'
  endif
  if item_4_text != blank
    assign items = items | append: item_4_text | append: '||' | append: item_4_url | append: ';;'
  endif
  
  assign items_array = items | split: ';;'
-%}

{%- if items_array.size > 0 -%}
  <div class="product-trust" data-product-trust>
    <ul class="product-trust__list">
      {%- for item in items_array -%}
        {%- if item != blank -%}
          {%- assign parts = item | split: '||' -%}
          {%- assign text = parts[0] -%}
          {%- assign url = parts[1] -%}
          
          <li class="product-trust__item">
            {%- if url != blank -%}
              <a href="{{ url }}" class="product-trust__link" target="_blank" rel="noopener">
            {%- else -%}
              <span class="product-trust__link">
            {%- endif -%}
            
              <span class="product-trust__icon">
                {%- render 'html-theme-icons', icon: 'check-mark', size: '1em' -%}
              </span>
              <span class="product-trust__text">{{ text }}</span>
              
            {%- if url != blank -%}
              </a>
            {%- else -%}
              </span>
            {%- endif -%}
          </li>
        {%- endif -%}
      {%- endfor -%}
    </ul>
  </div>
{%- endif -%}

<style>
  .product-trust {
    padding: 1em;
    background-color: var(--theme-color-grey, #f5f5f5);
    border-radius: 4px;
    /* margins controlled by parent */
  }

  .product-trust__list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 0.5em;
  }

  .product-trust__link {
    display: flex;
    align-items: flex-start;
    gap: 0.75em;
    color: inherit;
    text-decoration: none;
  }

  a.product-trust__link:hover {
    text-decoration: underline;
  }

  .product-trust__icon {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-top: 0.1em;
    color: var(--theme-color-green, #22c55e);
  }

  .product-trust__text {
    font-size: 0.9em;
    letter-spacing: -0.01em;
    color: var(--theme-color-green, #22c55e);
  }
</style>
